# RUBY ON RAILS EXAMPLE WITH DOCKER

This example run with docker on windows. The volume config on Docker Compose contains a windows dir.

SOURCE: https://docs.docker.com/compose/rails/

With those files in place, you can now generate the Rails skeleton app using docker-compose run:

`docker-compose run web rails new . --force --no-deps --database=postgresql`

Next, create a bootstrap Gemfile which just loads Rails. It’ll be overwritten in a moment by rails new.

```
source 'https://rubygems.org'
gem 'rails', '~>5'
```

Create an empty Gemfile.lock to build our Dockerfile.

``touch Gemfile.lock``

If you are running Docker on Mac or Windows, you should already have ownership of all files, including those generated by rails new.

Now that you’ve got a new Gemfile, you need to build the image again. (This, and changes to the Gemfile or the Dockerfile, should be the only times you’ll need to rebuild.)

`docker-compose build`


Replace the contents of config/database.yml with the following:

```
  default: &default
  adapter: postgresql
  encoding: unicode
  host: db
  username: postgres
  password:
  pool: 5

development:
  <<: *default
  database: myapp_development


test:
  <<: *default
  database: myapp_test
```

You can now boot the app with docker-compose up:

`docker-compose up`

For create a new postrgree's db

`docker-compose run web rake db:create name`